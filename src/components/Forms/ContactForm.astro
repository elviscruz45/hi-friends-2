---
import Button from "@components/Button/Button.astro";
---

<form id="contact-form" name="contact form" class="flex h-full flex-col justify-between gap-4">
	<input type="hidden" name="form-name" value="contact" />
	<div>
		<label for="contact-name" class="font-heading-1 text-lg uppercase">Tu Nombre</label>
		<input type="text" class="form__input" name="name" id="contact-name" placeholder="" required />
	</div>
	<div class="flex flex-col gap-1">
		<label for="contact-email" class="font-heading-1 text-lg uppercase">E-mail </label>
		<input
			type="email"
			class="form__input"
			name="email"
			id="contact-email"
			inputmode="email"
			placeholder=""
			required
		/>
	</div>
	<div>
		<label for="contact-date" class="font-heading-1 text-lg uppercase">Fecha del evento </label>
		<input
			type="date"
			class="form__input"
			name="date"
			id="contact-date"
			placeholder="DD/MM/AAAA"
			required
		/>
	</div>
	<div>
		<label for="contact-message" class="font-heading-1 text-lg uppercase">Mensaje </label>
		<textarea
			name="message"
			class="form__input"
			id="contact-message"
			rows="6"
			placeholder=""
			required></textarea>
	</div>
	<div class="flex flex-wrap gap-4">
		<Button id="whatsapp-send" variant="primary" type="submit" class="px-10 md:w-fit">Enviar</Button
		>
		<!-- <Button
			variant="secondary"
			type="button"
			id="whatsapp-send"
			class="flex items-center gap-2 px-10 md:w-fit"
		>
			<svg
				xmlns="http://www.w3.org/2000/svg"
				width="16"
				height="16"
				fill="currentColor"
				viewBox="0 0 16 16"
			>
				<path
					d="M13.601 2.326A7.854 7.854 0 0 0 7.994 0C3.627 0 .068 3.558.064 7.926c0 1.399.366 2.76 1.057 3.965L0 16l4.204-1.102a7.933 7.933 0 0 0 3.79.965h.004c4.368 0 7.926-3.558 7.93-7.93A7.898 7.898 0 0 0 13.6 2.326zM7.994 14.521a6.573 6.573 0 0 1-3.356-.92l-.24-.144-2.494.654.666-2.433-.156-.251a6.56 6.56 0 0 1-1.007-3.505c0-3.626 2.957-6.584 6.591-6.584a6.56 6.56 0 0 1 4.66 1.931 6.557 6.557 0 0 1 1.928 4.66c-.004 3.639-2.961 6.592-6.592 6.592z"
				></path>
			</svg>
			Enviar por WhatsApp
		</Button> -->
	</div>
</form>

<script>
	document.addEventListener("DOMContentLoaded", () => {
		const whatsappButton = document.getElementById("whatsapp-send");

		if (whatsappButton) {
			whatsappButton.addEventListener("click", () => {
				// Get form data with proper typecasting
				const nameInputElement = document.getElementById("contact-name") as HTMLInputElement;
				const nameValue = nameInputElement?.value || "";

				const emailInputElement = document.getElementById("contact-email") as HTMLInputElement;
				const emailValue = emailInputElement?.value || "";

				const dateInputElement = document.getElementById("contact-date") as HTMLInputElement;
				const dateValue = dateInputElement?.value || "";

				const messageInputElement = document.getElementById(
					"contact-message",
				) as HTMLTextAreaElement;
				const messageValue = messageInputElement?.value || "";

				// Format the message for WhatsApp
				const message = encodeURIComponent(
					`Nombre: ${nameValue}\n` +
						`Email: ${emailValue}\n` +
						`Fecha del evento: ${dateValue}\n` +
						`Mensaje: ${messageValue}`,
				);

				// Open WhatsApp with the formatted message
				window.open(`https://wa.me/51973590882?text=${message}`, "_blank");
			});
		}
	});
</script>
